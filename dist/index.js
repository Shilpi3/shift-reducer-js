"use strict";

exports["default"] = reduce;
/**
 * Copyright 2014 Shape Security, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License")
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var MonoidalReducer = require("./monoidal-reducer")["default"];
exports.MonoidalReducer = MonoidalReducer;



function recurse(branch) {
  return function (reducer, node) {
    var branchNode = node[branch];
    return DRIVER[branchNode.type](reducer, branchNode);
  };
}

function recurseMaybe(branch) {
  return function (reducer, node) {
    var branchNode = node[branch];
    if (branchNode == null) return null;
    return DRIVER[branchNode.type](reducer, branchNode);
  };
}

function recurseList(branch) {
  return function (reducer, node) {
    return [].map.call(node[branch], function (n) {
      return DRIVER[n.type](reducer, n);
    });
  };
}

function recurseListMaybe(branch) {
  return function (reducer, node) {
    return [].map.call(node[branch], function (n) {
      if (n == null) return null;
      return DRIVER[n.type](reducer, n);
    });
  };
}

var REDUCER_SPEC = {
  ArrayBinding: [recurseListMaybe("elements"), recurseMaybe("restElement")],
  ArrayExpression: [recurseListMaybe("elements")],
  ArrowExpression: [recurseList("parameters"), recurseMaybe("restParameter"), recurse("body")],
  AssignmentExpression: [recurse("binding"), recurse("expression")],
  BinaryExpression: [recurse("left"), recurse("right")],
  BindingIdentifier: [recurse("identifier")],
  BindingPropertyIdentifier: [recurse("identifier"), recurseMaybe("init")],
  BindingPropertyProperty: [recurse("name"), recurse("binding")],
  BindingWithDefault: [recurse("binding"), recurse("init")],
  Block: [recurseList("statements")],
  BlockStatement: [recurse("block")],
  BreakStatement: [recurseMaybe("label")],
  CallExpression: [recurse("callee"), recurseList("arguments")],
  CatchClause: [recurse("binding"), recurse("body")],
  ClassDeclaration: [recurse("name"), recurseMaybe("super"), recurseList("elements")],
  ClassElement: [recurse("method")],
  ClassExpression: [recurseMaybe("name"), recurseMaybe("super"), recurseList("elements")],
  ComputedMemberExpression: [recurse("object"), recurse("expression")],
  ComputedPropertyName: [recurse("expression")],
  ConditionalExpression: [recurse("test"), recurse("consequent"), recurse("alternate")],
  ContinueStatement: [recurseMaybe("label")],
  DataProperty: [recurse("name"), recurse("expression")],
  DebuggerStatement: [],
  Directive: [],
  DoWhileStatement: [recurse("body"), recurse("test")],
  EmptyStatement: [],
  Export: [recurse("declaration")],
  ExportAllFrom: [],
  ExportDefault: [recurse("body")],
  ExportFrom: [recurseList("namedExports")],
  ExportSpecifier: [recurseMaybe("name"), recurse("exportedName")],
  ExpressionStatement: [recurse("expression")],
  ForInStatement: [recurse("left"), recurse("right"), recurse("body")],
  ForOfStatement: [recurse("left"), recurse("right"), recurse("body")],
  ForStatement: [recurseMaybe("init"), recurseMaybe("test"), recurseMaybe("update"), recurse("body")],
  FunctionBody: [recurseList("directives"), recurseList("statements")],
  FunctionDeclaration: [recurse("name"), recurseList("parameters"), recurseMaybe("restParameter"), recurse("body")],
  FunctionExpression: [recurseMaybe("name"), recurseList("parameters"), recurseMaybe("restParameter"), recurse("body")],
  Getter: [recurse("name"), recurse("body")],
  Identifier: [],
  IdentifierExpression: [recurse("identifier")],
  IfStatement: [recurse("test"), recurse("consequent"), recurseMaybe("alternate")],
  Import: [recurseMaybe("defaultBinding"), recurseList("namedImports")],
  ImportNamespace: [recurseMaybe("defaultBinding"), recurse("namespaceBinding")],
  ImportSpecifier: [recurseMaybe("name"), recurse("binding")],
  LabeledStatement: [recurse("label"), recurse("body")],
  LiteralBooleanExpression: [],
  LiteralInfinityExpression: [],
  LiteralNullExpression: [],
  LiteralNumericExpression: [],
  LiteralRegExpExpression: [],
  LiteralStringExpression: [],
  Method: [recurse("name"), recurseList("parameters"), recurseMaybe("restParameter"), recurse("body")],
  Module: [recurseList("items")],
  NewExpression: [recurse("callee"), recurseList("arguments")],
  NewTargetExpression: [],
  ObjectBinding: [recurseList("properties")],
  ObjectExpression: [recurseList("properties")],
  PostfixExpression: [recurse("operand")],
  PrefixExpression: [recurse("operand")],
  ReturnStatement: [recurseMaybe("expression")],
  Script: [recurse("body")],
  Setter: [recurse("name"), recurse("parameter"), recurse("body")],
  ShorthandProperty: [recurse("name")],
  SpreadElement: [recurse("expression")],
  StaticMemberExpression: [recurse("object"), recurse("property")],
  StaticPropertyName: [],
  Super: [],
  SwitchCase: [recurse("test"), recurseList("consequent")],
  SwitchDefault: [recurseList("consequent")],
  SwitchStatement: [recurse("discriminant"), recurseList("cases")],
  SwitchStatementWithDefault: [recurse("discriminant"), recurseList("preDefaultCases"), recurse("defaultCase"), recurseList("postDefaultCases")],
  TemplateElement: [],
  TemplateExpression: [recurseMaybe("tag"), recurseList("elements")],
  ThisExpression: [],
  ThrowStatement: [recurse("expression")],
  TryCatchStatement: [recurse("body"), recurse("catchClause")],
  TryFinallyStatement: [recurse("body"), recurseMaybe("catchClause"), recurse("finalizer")],
  VariableDeclaration: [recurseList("declarators")],
  VariableDeclarationStatement: [recurse("declaration")],
  VariableDeclarator: [recurse("binding"), recurseMaybe("init")],
  WhileStatement: [recurse("test"), recurse("body")],
  WithStatement: [recurse("object"), recurse("body")],
  YieldExpression: [recurseMaybe("expression")],
  YieldGeneratorExpression: [recurse("expression")] };

var DRIVER = (function () {
  var o = Object.create(null);
  for (var T in REDUCER_SPEC) {
    var _ret = (function (T) {
      if (!({}).hasOwnProperty.call(REDUCER_SPEC, T)) return "continue";
      var reducingFunctionName = "reduce" + T;
      o[T] = function (reducer, node) {
        return reducer[reducingFunctionName].apply(reducer, [node].concat(REDUCER_SPEC[T].map(function (f) {
          return f(reducer, node);
        })));
      };
    })(T);

    if (_ret === "continue") continue;
  }
  return o;
})();


function reduce(reducer, reducible) {
  return DRIVER[reducible.type](reducer, reducible);
}
//# sourceMappingURL=data:application/json;base64,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QUFVO0FBQ3hCLE1BQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDNUIsT0FBSSxJQUFJLENBQUMsSUFBSSxZQUFZLEVBQUU7MEJBQW5CLENBQUM7QUFDUCxVQUFHLENBQUMsQ0FBQSxHQUFFLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDLEVBQUUsa0JBQVM7QUFDdEQsVUFBSSxvQkFBb0IsR0FBRyxRQUFRLEdBQUcsQ0FBQyxDQUFDO0FBQ3hDLE9BQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxVQUFTLE9BQU8sRUFBRSxJQUFJLEVBQUU7QUFDN0IsZUFBTyxPQUFPLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUMvRCxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQUMsQ0FBQztpQkFBSyxDQUFDLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQztTQUFBLENBQUMsQ0FDN0MsQ0FBQyxDQUFDO09BQ0osQ0FBQztPQVBJLENBQUM7OzZCQUNzQyxTQUFTO0dBT3ZEO0FBQ0QsU0FBTyxDQUFDLENBQUM7Q0FDVixDQUFBLEVBQUUsQUFBQyxDQUFDOzs7QUFHVSxTQUFTLE1BQU0sQ0FBQyxPQUFPLEVBQUUsU0FBUyxFQUFFO0FBQ2pELFNBQU8sTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDLENBQUM7Q0FDbkQiLCJmaWxlIjoic3JjL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNCBTaGFwZSBTZWN1cml0eSwgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIilcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCBNb25vaWRhbFJlZHVjZXIgZnJvbSBcIi4vbW9ub2lkYWwtcmVkdWNlclwiXG5leHBvcnQge01vbm9pZGFsUmVkdWNlcn07XG5cblxuZnVuY3Rpb24gcmVjdXJzZShicmFuY2gpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHJlZHVjZXIsIG5vZGUpIHtcbiAgICBsZXQgYnJhbmNoTm9kZSA9IG5vZGVbYnJhbmNoXTtcbiAgICByZXR1cm4gRFJJVkVSW2JyYW5jaE5vZGUudHlwZV0ocmVkdWNlciwgYnJhbmNoTm9kZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHJlY3Vyc2VNYXliZShicmFuY2gpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHJlZHVjZXIsIG5vZGUpIHtcbiAgICBsZXQgYnJhbmNoTm9kZSA9IG5vZGVbYnJhbmNoXTtcbiAgICBpZiAoYnJhbmNoTm9kZSA9PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gRFJJVkVSW2JyYW5jaE5vZGUudHlwZV0ocmVkdWNlciwgYnJhbmNoTm9kZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHJlY3Vyc2VMaXN0KGJyYW5jaCkge1xuICByZXR1cm4gZnVuY3Rpb24ocmVkdWNlciwgbm9kZSkge1xuICAgIHJldHVybiBbXS5tYXAuY2FsbChub2RlW2JyYW5jaF0sIChuKSA9PiBEUklWRVJbbi50eXBlXShyZWR1Y2VyLCBuKSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHJlY3Vyc2VMaXN0TWF5YmUoYnJhbmNoKSB7XG4gIHJldHVybiBmdW5jdGlvbihyZWR1Y2VyLCBub2RlKSB7XG4gICAgcmV0dXJuIFtdLm1hcC5jYWxsKG5vZGVbYnJhbmNoXSwgKG4pID0+IHtcbiAgICAgIGlmIChuID09IG51bGwpIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIERSSVZFUltuLnR5cGVdKHJlZHVjZXIsIG4pO1xuICAgIH0pO1xuICB9O1xufVxuXG5jb25zdCBSRURVQ0VSX1NQRUMgPSB7XG4gIEFycmF5QmluZGluZzogW3JlY3Vyc2VMaXN0TWF5YmUoXCJlbGVtZW50c1wiKSwgcmVjdXJzZU1heWJlKFwicmVzdEVsZW1lbnRcIildLFxuICBBcnJheUV4cHJlc3Npb246IFtyZWN1cnNlTGlzdE1heWJlKFwiZWxlbWVudHNcIildLFxuICBBcnJvd0V4cHJlc3Npb246IFtyZWN1cnNlTGlzdChcInBhcmFtZXRlcnNcIiksIHJlY3Vyc2VNYXliZShcInJlc3RQYXJhbWV0ZXJcIiksIHJlY3Vyc2UoXCJib2R5XCIpXSxcbiAgQXNzaWdubWVudEV4cHJlc3Npb246IFtyZWN1cnNlKFwiYmluZGluZ1wiKSwgcmVjdXJzZShcImV4cHJlc3Npb25cIildLFxuICBCaW5hcnlFeHByZXNzaW9uOiBbcmVjdXJzZShcImxlZnRcIiksIHJlY3Vyc2UoXCJyaWdodFwiKV0sXG4gIEJpbmRpbmdJZGVudGlmaWVyOiBbcmVjdXJzZShcImlkZW50aWZpZXJcIildLFxuICBCaW5kaW5nUHJvcGVydHlJZGVudGlmaWVyOiBbcmVjdXJzZShcImlkZW50aWZpZXJcIiksIHJlY3Vyc2VNYXliZShcImluaXRcIildLFxuICBCaW5kaW5nUHJvcGVydHlQcm9wZXJ0eTogW3JlY3Vyc2UoXCJuYW1lXCIpLCByZWN1cnNlKFwiYmluZGluZ1wiKV0sXG4gIEJpbmRpbmdXaXRoRGVmYXVsdDogW3JlY3Vyc2UoXCJiaW5kaW5nXCIpLCByZWN1cnNlKFwiaW5pdFwiKV0sXG4gIEJsb2NrOiBbcmVjdXJzZUxpc3QoXCJzdGF0ZW1lbnRzXCIpXSxcbiAgQmxvY2tTdGF0ZW1lbnQ6IFtyZWN1cnNlKFwiYmxvY2tcIildLFxuICBCcmVha1N0YXRlbWVudDogW3JlY3Vyc2VNYXliZShcImxhYmVsXCIpXSxcbiAgQ2FsbEV4cHJlc3Npb246IFtyZWN1cnNlKFwiY2FsbGVlXCIpLCByZWN1cnNlTGlzdChcImFyZ3VtZW50c1wiKV0sXG4gIENhdGNoQ2xhdXNlOiBbcmVjdXJzZShcImJpbmRpbmdcIiksIHJlY3Vyc2UoXCJib2R5XCIpXSxcbiAgQ2xhc3NEZWNsYXJhdGlvbjogW3JlY3Vyc2UoXCJuYW1lXCIpLCByZWN1cnNlTWF5YmUoXCJzdXBlclwiKSwgcmVjdXJzZUxpc3QoXCJlbGVtZW50c1wiKV0sXG4gIENsYXNzRWxlbWVudDogW3JlY3Vyc2UoXCJtZXRob2RcIildLFxuICBDbGFzc0V4cHJlc3Npb246IFtyZWN1cnNlTWF5YmUoXCJuYW1lXCIpLCByZWN1cnNlTWF5YmUoXCJzdXBlclwiKSwgcmVjdXJzZUxpc3QoXCJlbGVtZW50c1wiKV0sXG4gIENvbXB1dGVkTWVtYmVyRXhwcmVzc2lvbjogW3JlY3Vyc2UoXCJvYmplY3RcIiksIHJlY3Vyc2UoXCJleHByZXNzaW9uXCIpXSxcbiAgQ29tcHV0ZWRQcm9wZXJ0eU5hbWU6IFtyZWN1cnNlKFwiZXhwcmVzc2lvblwiKV0sXG4gIENvbmRpdGlvbmFsRXhwcmVzc2lvbjogW3JlY3Vyc2UoXCJ0ZXN0XCIpLCByZWN1cnNlKFwiY29uc2VxdWVudFwiKSwgcmVjdXJzZShcImFsdGVybmF0ZVwiKV0sXG4gIENvbnRpbnVlU3RhdGVtZW50OiBbcmVjdXJzZU1heWJlKFwibGFiZWxcIildLFxuICBEYXRhUHJvcGVydHk6IFtyZWN1cnNlKFwibmFtZVwiKSwgcmVjdXJzZShcImV4cHJlc3Npb25cIildLFxuICBEZWJ1Z2dlclN0YXRlbWVudDogW10sXG4gIERpcmVjdGl2ZTogW10sXG4gIERvV2hpbGVTdGF0ZW1lbnQ6IFtyZWN1cnNlKFwiYm9keVwiKSwgcmVjdXJzZShcInRlc3RcIildLFxuICBFbXB0eVN0YXRlbWVudDogW10sXG4gIEV4cG9ydDogW3JlY3Vyc2UoXCJkZWNsYXJhdGlvblwiKV0sXG4gIEV4cG9ydEFsbEZyb206IFtdLFxuICBFeHBvcnREZWZhdWx0OiBbcmVjdXJzZShcImJvZHlcIildLFxuICBFeHBvcnRGcm9tOiBbcmVjdXJzZUxpc3QoXCJuYW1lZEV4cG9ydHNcIildLFxuICBFeHBvcnRTcGVjaWZpZXI6IFtyZWN1cnNlTWF5YmUoXCJuYW1lXCIpLCByZWN1cnNlKFwiZXhwb3J0ZWROYW1lXCIpXSxcbiAgRXhwcmVzc2lvblN0YXRlbWVudDogW3JlY3Vyc2UoXCJleHByZXNzaW9uXCIpXSxcbiAgRm9ySW5TdGF0ZW1lbnQ6IFtyZWN1cnNlKFwibGVmdFwiKSwgcmVjdXJzZShcInJpZ2h0XCIpLCByZWN1cnNlKFwiYm9keVwiKV0sXG4gIEZvck9mU3RhdGVtZW50OiBbcmVjdXJzZShcImxlZnRcIiksIHJlY3Vyc2UoXCJyaWdodFwiKSwgcmVjdXJzZShcImJvZHlcIildLFxuICBGb3JTdGF0ZW1lbnQ6IFtyZWN1cnNlTWF5YmUoXCJpbml0XCIpLCByZWN1cnNlTWF5YmUoXCJ0ZXN0XCIpLCByZWN1cnNlTWF5YmUoXCJ1cGRhdGVcIiksIHJlY3Vyc2UoXCJib2R5XCIpXSxcbiAgRnVuY3Rpb25Cb2R5OiBbcmVjdXJzZUxpc3QoXCJkaXJlY3RpdmVzXCIpLCByZWN1cnNlTGlzdChcInN0YXRlbWVudHNcIildLFxuICBGdW5jdGlvbkRlY2xhcmF0aW9uOiBbcmVjdXJzZShcIm5hbWVcIiksIHJlY3Vyc2VMaXN0KFwicGFyYW1ldGVyc1wiKSwgcmVjdXJzZU1heWJlKFwicmVzdFBhcmFtZXRlclwiKSwgcmVjdXJzZShcImJvZHlcIildLFxuICBGdW5jdGlvbkV4cHJlc3Npb246IFtyZWN1cnNlTWF5YmUoXCJuYW1lXCIpLCByZWN1cnNlTGlzdChcInBhcmFtZXRlcnNcIiksIHJlY3Vyc2VNYXliZShcInJlc3RQYXJhbWV0ZXJcIiksIHJlY3Vyc2UoXCJib2R5XCIpXSxcbiAgR2V0dGVyOiBbcmVjdXJzZShcIm5hbWVcIiksIHJlY3Vyc2UoXCJib2R5XCIpXSxcbiAgSWRlbnRpZmllcjogW10sXG4gIElkZW50aWZpZXJFeHByZXNzaW9uOiBbcmVjdXJzZShcImlkZW50aWZpZXJcIildLFxuICBJZlN0YXRlbWVudDogW3JlY3Vyc2UoXCJ0ZXN0XCIpLCByZWN1cnNlKFwiY29uc2VxdWVudFwiKSwgcmVjdXJzZU1heWJlKFwiYWx0ZXJuYXRlXCIpXSxcbiAgSW1wb3J0OiBbcmVjdXJzZU1heWJlKFwiZGVmYXVsdEJpbmRpbmdcIiksIHJlY3Vyc2VMaXN0KFwibmFtZWRJbXBvcnRzXCIpXSxcbiAgSW1wb3J0TmFtZXNwYWNlOiBbcmVjdXJzZU1heWJlKFwiZGVmYXVsdEJpbmRpbmdcIiksIHJlY3Vyc2UoXCJuYW1lc3BhY2VCaW5kaW5nXCIpXSxcbiAgSW1wb3J0U3BlY2lmaWVyOiBbcmVjdXJzZU1heWJlKFwibmFtZVwiKSwgcmVjdXJzZShcImJpbmRpbmdcIildLFxuICBMYWJlbGVkU3RhdGVtZW50OiBbcmVjdXJzZShcImxhYmVsXCIpLCByZWN1cnNlKFwiYm9keVwiKV0sXG4gIExpdGVyYWxCb29sZWFuRXhwcmVzc2lvbjogW10sXG4gIExpdGVyYWxJbmZpbml0eUV4cHJlc3Npb246IFtdLFxuICBMaXRlcmFsTnVsbEV4cHJlc3Npb246IFtdLFxuICBMaXRlcmFsTnVtZXJpY0V4cHJlc3Npb246IFtdLFxuICBMaXRlcmFsUmVnRXhwRXhwcmVzc2lvbjogW10sXG4gIExpdGVyYWxTdHJpbmdFeHByZXNzaW9uOiBbXSxcbiAgTWV0aG9kOiBbcmVjdXJzZShcIm5hbWVcIiksIHJlY3Vyc2VMaXN0KFwicGFyYW1ldGVyc1wiKSwgcmVjdXJzZU1heWJlKFwicmVzdFBhcmFtZXRlclwiKSwgcmVjdXJzZShcImJvZHlcIildLFxuICBNb2R1bGU6IFtyZWN1cnNlTGlzdChcIml0ZW1zXCIpXSxcbiAgTmV3RXhwcmVzc2lvbjogW3JlY3Vyc2UoXCJjYWxsZWVcIiksIHJlY3Vyc2VMaXN0KFwiYXJndW1lbnRzXCIpXSxcbiAgTmV3VGFyZ2V0RXhwcmVzc2lvbjogW10sXG4gIE9iamVjdEJpbmRpbmc6IFtyZWN1cnNlTGlzdChcInByb3BlcnRpZXNcIildLFxuICBPYmplY3RFeHByZXNzaW9uOiBbcmVjdXJzZUxpc3QoXCJwcm9wZXJ0aWVzXCIpXSxcbiAgUG9zdGZpeEV4cHJlc3Npb246IFtyZWN1cnNlKFwib3BlcmFuZFwiKV0sXG4gIFByZWZpeEV4cHJlc3Npb246IFtyZWN1cnNlKFwib3BlcmFuZFwiKV0sXG4gIFJldHVyblN0YXRlbWVudDogW3JlY3Vyc2VNYXliZShcImV4cHJlc3Npb25cIildLFxuICBTY3JpcHQ6IFtyZWN1cnNlKFwiYm9keVwiKV0sXG4gIFNldHRlcjogW3JlY3Vyc2UoXCJuYW1lXCIpLCByZWN1cnNlKFwicGFyYW1ldGVyXCIpLCByZWN1cnNlKFwiYm9keVwiKV0sXG4gIFNob3J0aGFuZFByb3BlcnR5OiBbcmVjdXJzZShcIm5hbWVcIildLFxuICBTcHJlYWRFbGVtZW50OiBbcmVjdXJzZShcImV4cHJlc3Npb25cIildLFxuICBTdGF0aWNNZW1iZXJFeHByZXNzaW9uOiBbcmVjdXJzZShcIm9iamVjdFwiKSwgcmVjdXJzZShcInByb3BlcnR5XCIpXSxcbiAgU3RhdGljUHJvcGVydHlOYW1lOiBbXSxcbiAgU3VwZXI6IFtdLFxuICBTd2l0Y2hDYXNlOiBbcmVjdXJzZShcInRlc3RcIiksIHJlY3Vyc2VMaXN0KFwiY29uc2VxdWVudFwiKV0sXG4gIFN3aXRjaERlZmF1bHQ6IFtyZWN1cnNlTGlzdChcImNvbnNlcXVlbnRcIildLFxuICBTd2l0Y2hTdGF0ZW1lbnQ6IFtyZWN1cnNlKFwiZGlzY3JpbWluYW50XCIpLCByZWN1cnNlTGlzdChcImNhc2VzXCIpXSxcbiAgU3dpdGNoU3RhdGVtZW50V2l0aERlZmF1bHQ6IFtyZWN1cnNlKFwiZGlzY3JpbWluYW50XCIpLCByZWN1cnNlTGlzdChcInByZURlZmF1bHRDYXNlc1wiKSwgcmVjdXJzZShcImRlZmF1bHRDYXNlXCIpLCByZWN1cnNlTGlzdChcInBvc3REZWZhdWx0Q2FzZXNcIildLFxuICBUZW1wbGF0ZUVsZW1lbnQ6IFtdLFxuICBUZW1wbGF0ZUV4cHJlc3Npb246IFtyZWN1cnNlTWF5YmUoXCJ0YWdcIiksIHJlY3Vyc2VMaXN0KFwiZWxlbWVudHNcIildLFxuICBUaGlzRXhwcmVzc2lvbjogW10sXG4gIFRocm93U3RhdGVtZW50OiBbcmVjdXJzZShcImV4cHJlc3Npb25cIildLFxuICBUcnlDYXRjaFN0YXRlbWVudDogW3JlY3Vyc2UoXCJib2R5XCIpLCByZWN1cnNlKFwiY2F0Y2hDbGF1c2VcIildLFxuICBUcnlGaW5hbGx5U3RhdGVtZW50OiBbcmVjdXJzZShcImJvZHlcIiksIHJlY3Vyc2VNYXliZShcImNhdGNoQ2xhdXNlXCIpLCByZWN1cnNlKFwiZmluYWxpemVyXCIpXSxcbiAgVmFyaWFibGVEZWNsYXJhdGlvbjogW3JlY3Vyc2VMaXN0KFwiZGVjbGFyYXRvcnNcIildLFxuICBWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50OiBbcmVjdXJzZShcImRlY2xhcmF0aW9uXCIpXSxcbiAgVmFyaWFibGVEZWNsYXJhdG9yOiBbcmVjdXJzZShcImJpbmRpbmdcIiksIHJlY3Vyc2VNYXliZShcImluaXRcIildLFxuICBXaGlsZVN0YXRlbWVudDogW3JlY3Vyc2UoXCJ0ZXN0XCIpLCByZWN1cnNlKFwiYm9keVwiKV0sXG4gIFdpdGhTdGF0ZW1lbnQ6IFtyZWN1cnNlKFwib2JqZWN0XCIpLCByZWN1cnNlKFwiYm9keVwiKV0sXG4gIFlpZWxkRXhwcmVzc2lvbjogW3JlY3Vyc2VNYXliZShcImV4cHJlc3Npb25cIildLFxuICBZaWVsZEdlbmVyYXRvckV4cHJlc3Npb246IFtyZWN1cnNlKFwiZXhwcmVzc2lvblwiKV0sXG59O1xuXG5jb25zdCBEUklWRVIgPSAoZnVuY3Rpb24oKXtcbiAgdmFyIG8gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBmb3IobGV0IFQgaW4gUkVEVUNFUl9TUEVDKSB7XG4gICAgaWYoIXt9Lmhhc093blByb3BlcnR5LmNhbGwoUkVEVUNFUl9TUEVDLCBUKSkgY29udGludWU7XG4gICAgbGV0IHJlZHVjaW5nRnVuY3Rpb25OYW1lID0gXCJyZWR1Y2VcIiArIFQ7XG4gICAgb1tUXSA9IGZ1bmN0aW9uKHJlZHVjZXIsIG5vZGUpIHtcbiAgICAgIHJldHVybiByZWR1Y2VyW3JlZHVjaW5nRnVuY3Rpb25OYW1lXS5hcHBseShyZWR1Y2VyLCBbbm9kZV0uY29uY2F0KFxuICAgICAgICBSRURVQ0VSX1NQRUNbVF0ubWFwKChmKSA9PiBmKHJlZHVjZXIsIG5vZGUpKVxuICAgICAgKSk7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gbztcbn0oKSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVkdWNlKHJlZHVjZXIsIHJlZHVjaWJsZSkge1xuICByZXR1cm4gRFJJVkVSW3JlZHVjaWJsZS50eXBlXShyZWR1Y2VyLCByZWR1Y2libGUpO1xufVxuIl19